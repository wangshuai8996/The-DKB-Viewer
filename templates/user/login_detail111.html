<!DOCTYPE html>
<html lang="en">
{% load static %}
<head>
    <meta charset="UTF-8">
    <title>
        学生选课管理系统
    </title>

    <script src="https://cdn.bootcss.com/echarts/4.1.0.rc2/echarts.js"></script>
{#    <script src="https://echarts.baidu.com/dist/echarts.min.js" type="text/javascript"></script>#}
    <script src="https://code.jquery.com/jquery-3.6.0.min.js" type="text/javascript"></script>
</head>
<body>
    <div class="container">
        <div id="main" style="width: 1000px;height:500px;"></div>
    </div>
    <!--右键弹出菜单-->
{#    <div id="rightMenu" class="menu" style="display: none;">#}
{#		<div id="hide">hide</div>#}
{#		<div id="expand">expand</div>#}
{#		<div id="collapse">collapse</div>#}
{#    </div>#}

    <script type="text/javascript">
        //返回登录时的session_id
        {#var session_id = {{ session_id | safe }};#}
        {#var p_session_id = document.getElementById("p_session_id");#}
        {#p_session_id.innerHTML = "session_id: " + session_id;#}

        var data = {{ data|safe }};
        var link = {{ link|safe }};
        var myChart = echarts.init(document.getElementById('main'));
        console.log(data);
        console.log(link);
        var categories = [];
        for (var i = 0; i < 3; i++) {
            categories[i] = {
                name: 'cate' + i
            };
        }
        option = {
            // 图的标题
            title: {
                text: 'ECharts of the DKB'
            },
            // 提示框的配置
            tooltip: {
                formatter: function (x) {
                    return x.data.des;
                }
            },
            // 工具箱
            toolbox: {
                // 显示工具箱
                show: true,
                feature: {
                    mark: {
                        show: true
                    },
                    // 还原
                    restore: {
                        show: true
                    },
                    // 保存为图片
                    saveAsImage: {
                        show: true
                    }
                }
            },
            legend: [{
                // selectedMode: 'single',
                data: categories.map(function (a) {
                    return a.name;
                })
            }],
            series: [{
                type: 'graph',// 类型:关系图
                layout: 'force', //图的布局，类型为力导图
                symbolSize: data.symbolSize, // 调整节点的大小
                roam: true, // 是否开启鼠标缩放和平移漫游。默认不开启。如果只想要开启缩放或者平移,可以设置成 'scale' 或者 'move'。设置成 true 为都开启
                edgeSymbol: ['circle', 'arrow'],
                edgeSymbolSize: [2, 10],
                edgeLabel: {
                    normal: {
                        textStyle: {
                            fontSize: 20
                        }
                    }
                },
                force: {
                    repulsion: 2500,
                    edgeLength: [50, 100]
                },
                draggable: true,
                lineStyle: {
                    normal: {
                        width: 2,
                        color: '#4b565b',
                    }
                },
                edgeLabel: {
                    normal: {
                        show: false,
                        formatter: function (x) {
                            return x.data.name;
                        }
                    }
                },
                label: {
                    normal: {
                        show: true,
                        textStyle: {},
                        position:'inside'
                    }
                },

                // 数据
                data: data,
                links: link,
                categories: categories,
            }]
        };
        myChart.setOption(option);
    </script>
</body>
</html>